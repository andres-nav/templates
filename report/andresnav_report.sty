\NeedsTeXFormat{LaTeX2e} % need to be compiled with LuaLaTeX

\newcommand{\classversion}{v1.0}
\newcommand{\name}{andresnav_report}
\ProvidesClass{\name}[\classversion]

% **************************************************
% Options and necessary commands
% **************************************************
\newcommand\ensureinfocommand[1]{%
	\ifcsname#1\endcsname\else
		\expandafter\newcommand\csname#1\endcsname[1]{%
			\expandafter\newcommand\csname @#1\endcsname{##1}%
		}%
	\fi
}

\ensureinfocommand{title}
\ensureinfocommand{date}
\ensureinfocommand{version}
\ensureinfocommand{author}
\def\inserttitle{\ifdefined\@title\@title\fi}
\def\insertdate{\ifdefined\@date\@date\fi}
\def\insertversion{\ifdefined\@version, \@version\fi}
\def\insertauthor{\ifdefined\@author\@author\fi}

% **************************************************
% Graphics and layout
% **************************************************
\RequirePackage{graphicx} % To include images

\RequirePackage{geometry} % To set the page layout
\geometry{a4paper, vmargin=2.5cm, hmargin=3cm}

% **************************************************
% Fonts
% **************************************************
% Use the default Latin Modern font as it is the best :)

% **************************************************
% Author affiliations
% **************************************************
\RequirePackage{authblk}
\renewcommand\Affilfont{\small}

% **************************************************
% Paragraph handling
% **************************************************
\RequirePackage[parfill]{parskip}

% **************************************************
% Tables
% **************************************************
\RequirePackage[format=plain, labelfont={bf, it}, textfont=it]{caption}

% **************************************************
% Bibliography, bookmarks and links
% **************************************************
\RequirePackage[sorting=none]{biblatex} % sort references by appearance
\RequirePackage[bookmarks=true, colorlinks=true, linkcolor=blue, citecolor=red]{hyperref}
\RequirePackage{bookmark} % to reload the outline and bookmarks automatically


% **************************************************
% Title Page
% **************************************************
\renewcommand{\maketitle}{
	\begin{center}
		{\LARGE \bfseries \inserttitle} \\[1em]
		{\large \insertauthor} \\[1em]
		{\normalfont \insertdate \insertversion} \\[1em]
	\end{center}
	\br%
}

% **************************************************
% Abstract and keywords
% **************************************************
\providecommand{\keywords}[1]{\br\textbf{{Keywords:}} #1}

% **************************************************
% Custom commands
% **************************************************
\newcommand{\br}{\vspace{1em}}
\newcommand{\todo}[1]{\par\noindent\textcolor{red}{\textbf{TODO:}\ \raggedright#1}\par\noindent}
